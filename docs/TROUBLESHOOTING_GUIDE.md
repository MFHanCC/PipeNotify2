# Pipenotify Troubleshooting Guide

**Quick solutions for common issues and comprehensive debugging procedures**

---

## Table of Contents

1. [Quick Diagnostic Checklist](#quick-diagnostic-checklist)
2. [Common Issues & Solutions](#common-issues--solutions)
3. [Error Code Reference](#error-code-reference)
4. [Debugging Procedures](#debugging-procedures)
5. [Performance Issues](#performance-issues)
6. [Integration Problems](#integration-problems)
7. [Support Resources](#support-resources)

---

## Quick Diagnostic Checklist

### Before You Start

**Essential Information to Gather:**
- Error messages (exact text and screenshots)
- When the issue started occurring
- What actions trigger the problem
- Which browser/device you're using
- Recent changes to your setup

### 5-Minute Health Check

‚úÖ **Step 1: System Status**
- Go to Dashboard ‚Üí Overview tab
- Check system health indicators (should be green üü¢)
- Verify "Last Updated" timestamp is recent

‚úÖ **Step 2: Pipedrive Connection**
- Go to Onboarding tab or Dashboard
- Look for green ‚úÖ next to "Pipedrive Connected"
- If red ‚ùå, click "Reconnect to Pipedrive"

‚úÖ **Step 3: Webhook Status**
- Go to Webhooks tab
- Click "üß™ Test" on each webhook
- Verify test messages appear in Google Chat

‚úÖ **Step 4: Active Rules**
- Go to Rules tab
- Confirm rules are enabled (green toggle switch)
- Check "Last Triggered" column for recent activity

‚úÖ **Step 5: Recent Logs**
- Go to Logs tab
- Look for recent entries with "‚úÖ Success" status
- Check for any "‚ùå Failed" entries

---

## Common Issues & Solutions

### üö´ Notifications Not Appearing in Google Chat

**Symptoms:**
- Rules are enabled but no messages in chat
- Analytics show notifications as "delivered"
- No obvious error messages

**Quick Fixes:**
1. **Test Webhook Connection**
   ```
   ‚Üí Go to Webhooks tab
   ‚Üí Click "üß™ Test" button
   ‚Üí Check Google Chat for test message
   ```

2. **Verify Webhook URL**
   ```
   ‚Üí Must contain "chat.googleapis.com"
   ‚Üí Must start with "https://"
   ‚Üí Should be from the correct Google Chat space
   ```

3. **Check Google Chat Space Settings**
   ```
   ‚Üí Ensure you have permission to receive webhooks
   ‚Üí Verify the space still exists
   ‚Üí Check if webhook was disabled in Google Chat
   ```

**Advanced Solutions:**
- Regenerate webhook in Google Chat and update URL
- Check if Google Chat space was archived or deleted
- Verify webhook hasn't exceeded Google's rate limits

---

### ‚ö†Ô∏è High Failure Rate (>5%)

**Symptoms:**
- Analytics dashboard shows red ‚ö†Ô∏è failure indicators
- Many notifications marked as "Failed" in logs
- Poor success rate metrics

**Diagnostic Steps:**
1. **Check Error Details**
   ```
   ‚Üí Go to Logs tab
   ‚Üí Filter by "Failed" status
   ‚Üí Read error messages in "Details" column
   ```

2. **Test Individual Webhooks**
   ```
   ‚Üí Go to Webhooks tab
   ‚Üí Test each webhook separately
   ‚Üí Identify which ones are failing
   ```

3. **Common Error Messages:**
   - `"webhook_url_invalid"` ‚Üí Webhook URL format issue
   - `"space_not_found"` ‚Üí Google Chat space was deleted
   - `"rate_limit_exceeded"` ‚Üí Too many messages sent
   - `"network_timeout"` ‚Üí Google Chat temporary unavailability

**Solutions by Error Type:**

| Error | Solution |
|-------|----------|
| Invalid webhook URL | Regenerate webhook in Google Chat |
| Space not found | Create new webhook in active space |
| Rate limit exceeded | Enable quiet hours or reduce rule frequency |
| Network timeout | Check Google Chat status, usually resolves automatically |

---

### üîÑ Rules Not Triggering

**Symptoms:**
- Expected Pipedrive events don't generate notifications
- "Last Triggered" shows old dates or "Never"
- Analytics show low notification volume

**Step-by-Step Diagnosis:**

1. **Verify Pipedrive Connection**
   ```
   ‚Üí Check for green ‚úÖ "Pipedrive Connected" status
   ‚Üí If red ‚ùå, click "Reconnect to Pipedrive"
   ‚Üí Complete OAuth flow if prompted
   ```

2. **Review Rule Configuration**
   ```
   ‚Üí Go to Rules tab
   ‚Üí Click "Edit" on non-triggering rule
   ‚Üí Verify event type matches your actions in Pipedrive
   ‚Üí Check if filters are too restrictive
   ```

3. **Test with Simple Rule**
   ```
   ‚Üí Create new rule with these settings:
     - Event Type: "Deal Updated"
     - No filters
     - Any active webhook
   ‚Üí Make a test change to any deal in Pipedrive
   ‚Üí Check if notification appears
   ```

4. **Check Rule Filters**
   ```
   Common filter issues:
   ‚Üí Pipeline filter set to wrong pipeline
   ‚Üí Owner filter set to inactive user
   ‚Üí Deal value filter set too high
   ‚Üí Stage filter set to unused stage
   ```

**Quick Test Procedure:**
```
1. Go to Pipedrive
2. Open any deal
3. Change the deal stage
4. Wait 1-2 minutes
5. Check Google Chat for notification
6. If no notification, check Logs tab for errors
```

---

### üêå Slow Notification Delivery

**Symptoms:**
- Long delays between Pipedrive action and chat notification
- Analytics show high average response time (>5 seconds)
- Users report "late" notifications

**Performance Diagnosis:**

1. **Check Response Time Metrics**
   ```
   ‚Üí Go to Analytics tab
   ‚Üí Look at "Avg Response Time" metric
   ‚Üí Good: <2 seconds | Warning: 2-5 seconds | Critical: >5 seconds
   ```

2. **Identify Bottlenecks**
   ```
   ‚Üí Go to Analytics ‚Üí Channel Performance tab
   ‚Üí Compare response times across different webhooks
   ‚Üí Identify consistently slow channels
   ```

3. **Test Individual Components**
   ```
   ‚Üí Use webhook test function (should be instant)
   ‚Üí Create simple rule without complex filters
   ‚Üí Check if specific event types are slower
   ```

**Common Causes & Solutions:**

| Cause | Symptoms | Solution |
|-------|----------|----------|
| Google Chat API slowness | All webhooks slow | Wait for Google to resolve, check status.google.com |
| Complex rule filters | Specific rules slow | Simplify filters, reduce JSON complexity |
| Database performance | All operations slow | Contact support, may need scaling |
| High volume processing | Slow during peak hours | Enable quiet hours during busy periods |

---

### üîê Authentication & Access Issues

**Symptoms:**
- "Session expired" messages
- "Permission denied" errors
- Unable to access certain features

**Authentication Troubleshooting:**

1. **Clear Session & Re-login**
   ```
   ‚Üí Log out completely
   ‚Üí Clear browser cache and cookies
   ‚Üí Log back in with fresh session
   ```

2. **Check Pipedrive Permissions**
   ```
   ‚Üí Go to Pipedrive ‚Üí Settings ‚Üí Personal preferences ‚Üí Authorized apps
   ‚Üí Find "Pipenotify" in the list
   ‚Üí Verify permissions include "Read deals", "Read activities", etc.
   ‚Üí If missing, revoke and re-authorize
   ```

3. **Browser-Specific Issues**
   ```
   ‚Üí Try incognito/private browsing mode
   ‚Üí Disable browser extensions temporarily
   ‚Üí Clear localStorage and sessionStorage
   ‚Üí Try different browser
   ```

**Permission Levels:**
- **Admin**: Full access to all features
- **User**: Can view and create rules, limited webhook management
- **Viewer**: Read-only access to dashboard and logs

---

### üì± Mobile & Browser Compatibility

**Symptoms:**
- Layout appears broken on mobile
- Buttons not working properly
- Features missing on certain browsers

**Browser Support:**
- ‚úÖ **Fully Supported**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
- ‚ö†Ô∏è **Limited Support**: Internet Explorer (not recommended)
- üì± **Mobile**: Responsive design works on all modern mobile browsers

**Mobile-Specific Issues:**
1. **Layout Problems**
   ```
   ‚Üí Try rotating device (portrait/landscape)
   ‚Üí Zoom out to see full interface
   ‚Üí Refresh page to reload responsive styles
   ```

2. **Touch Interface Issues**
   ```
   ‚Üí Ensure you're tapping, not long-pressing
   ‚Üí Try double-tap on unresponsive elements
   ‚Üí Use latest mobile browser version
   ```

---

## Error Code Reference

### HTTP Status Codes

| Code | Meaning | Common Causes | Solution |
|------|---------|---------------|----------|
| 401 | Unauthorized | Token expired, invalid login | Re-authenticate |
| 403 | Forbidden | Insufficient permissions | Check user role |
| 404 | Not Found | Resource doesn't exist | Verify URL/ID |
| 429 | Rate Limited | Too many requests | Wait and retry |
| 500 | Server Error | Backend problem | Contact support |
| 503 | Service Unavailable | Maintenance mode | Check status page |

### Application Error Codes

#### WEBHOOK_ERRORS
- `WEBHOOK_URL_INVALID`: Malformed Google Chat webhook URL
- `WEBHOOK_UNREACHABLE`: Cannot connect to Google Chat
- `WEBHOOK_RATE_LIMITED`: Google Chat rate limit exceeded
- `WEBHOOK_SPACE_NOT_FOUND`: Google Chat space deleted/archived

#### RULE_ERRORS
- `RULE_FILTER_INVALID`: Rule filter syntax error
- `RULE_EVENT_TYPE_INVALID`: Unsupported event type
- `RULE_TEMPLATE_ERROR`: Template rendering failed
- `RULE_DISABLED`: Rule is disabled but triggered

#### AUTH_ERRORS
- `TOKEN_EXPIRED`: JWT token has expired
- `TOKEN_INVALID`: JWT token malformed or tampered
- `PIPEDRIVE_AUTH_FAILED`: Pipedrive OAuth failed
- `INSUFFICIENT_PERMISSIONS`: User lacks required permissions

---

## Debugging Procedures

### Comprehensive Diagnostic Process

#### Phase 1: Initial Assessment
1. **Reproduce the Issue**
   ```
   ‚Üí Document exact steps to trigger problem
   ‚Üí Note any error messages or unusual behavior
   ‚Üí Test in incognito mode to rule out browser issues
   ```

2. **Check System Health**
   ```
   ‚Üí Dashboard ‚Üí Overview ‚Üí System health indicators
   ‚Üí Analytics ‚Üí Check recent performance metrics
   ‚Üí Logs ‚Üí Look for patterns in recent failures
   ```

3. **Gather Environmental Information**
   ```
   ‚Üí Browser version and operating system
   ‚Üí Network connection quality
   ‚Üí Time zone and current time
   ‚Üí Recent changes to setup
   ```

#### Phase 2: Component Isolation
1. **Test Individual Components**
   ```
   ‚Üí Webhook connectivity (test buttons)
   ‚Üí Pipedrive connection (try reconnecting)
   ‚Üí Rule logic (create simple test rule)
   ‚Üí Template rendering (test with basic template)
   ```

2. **Identify Scope of Issue**
   ```
   ‚Üí Single rule vs. all rules
   ‚Üí Specific webhook vs. all webhooks
   ‚Üí Particular event types vs. all events
   ‚Üí One user vs. multiple users
   ```

#### Phase 3: Advanced Diagnostics
1. **Deep Log Analysis**
   ```
   ‚Üí Go to Logs tab
   ‚Üí Apply filters to narrow down timeframe
   ‚Üí Look for error patterns or correlations
   ‚Üí Check response times for performance issues
   ```

2. **Rule Testing Matrix**
   ```
   Create test rules with these combinations:
   ‚Üí Simple event + no filters + working webhook
   ‚Üí Complex event + no filters + working webhook
   ‚Üí Simple event + basic filters + working webhook
   ‚Üí Simple event + no filters + new webhook
   ```

3. **Network Diagnostics**
   ```
   ‚Üí Check browser developer tools (F12) ‚Üí Network tab
   ‚Üí Look for failed requests (red entries)
   ‚Üí Check request/response details
   ‚Üí Verify API endpoints are reachable
   ```

### Data Collection for Support

When contacting support, provide this information:

**Issue Details:**
- Exact error message or description
- Steps to reproduce the problem
- When the issue started
- Frequency (always, sometimes, once)

**Technical Information:**
```
Browser: Chrome 96.0.4664.110
OS: Windows 10
Tenant ID: [from JWT token or URL]
Affected Rules: [list rule names/IDs]
Error Logs: [copy relevant log entries]
```

**Screenshots:**
- Error messages or unexpected behavior
- Rule configuration screens
- Log entries showing failures
- Analytics dashboard showing issues

---

## Performance Issues

### Dashboard Loading Slowly

**Symptoms:**
- Long load times on initial page access
- Slow navigation between tabs
- Unresponsive interface

**Optimization Steps:**
1. **Browser Optimization**
   ```
   ‚Üí Clear browser cache and cookies
   ‚Üí Disable unnecessary browser extensions
   ‚Üí Close other browser tabs
   ‚Üí Ensure browser is up to date
   ```

2. **Network Optimization**
   ```
   ‚Üí Test internet speed (should be >10 Mbps)
   ‚Üí Try wired connection instead of WiFi
   ‚Üí Check if company firewall is blocking requests
   ‚Üí Use incognito mode to test without cache
   ```

3. **Data Volume Optimization**
   ```
   ‚Üí Use shorter date ranges in analytics
   ‚Üí Filter logs by recent timeframes
   ‚Üí Limit rules display to active rules only
   ```

### High Memory Usage

**Symptoms:**
- Browser becomes sluggish
- Tab crashes or becomes unresponsive
- System runs out of memory

**Memory Management:**
1. **Reduce Data Load**
   ```
   ‚Üí Limit analytics date range to 7 days
   ‚Üí Filter logs to show fewer entries
   ‚Üí Avoid keeping multiple Pipenotify tabs open
   ```

2. **Browser Maintenance**
   ```
   ‚Üí Restart browser periodically
   ‚Üí Clear browser data regularly
   ‚Üí Update to latest browser version
   ```

### API Rate Limiting

**Symptoms:**
- "Rate limit exceeded" errors
- Delayed responses from API
- Some requests failing intermittently

**Rate Limit Information:**
- General API: 100 requests per minute
- Webhook processing: 1000 requests per minute
- Analytics: 50 requests per minute

**Mitigation Strategies:**
1. **Reduce Request Frequency**
   ```
   ‚Üí Don't refresh dashboard excessively
   ‚Üí Use longer analytics date ranges
   ‚Üí Avoid bulk operations during peak hours
   ```

2. **Optimize Workflows**
   ```
   ‚Üí Plan bulk changes for off-peak hours
   ‚Üí Use bulk operations instead of individual requests
   ‚Üí Enable quiet hours to reduce automatic notifications
   ```

---

## Integration Problems

### Pipedrive Integration Issues

#### Connection Problems
**Symptoms:**
- Red ‚ùå "Pipedrive Disconnected" status
- OAuth flow fails or loops
- "Invalid credentials" errors

**Solutions:**
1. **Re-authorize Connection**
   ```
   ‚Üí Click "Reconnect to Pipedrive"
   ‚Üí Complete OAuth flow in popup window
   ‚Üí Grant all requested permissions
   ‚Üí Verify green ‚úÖ status appears
   ```

2. **Check Pipedrive App Status**
   ```
   ‚Üí Go to Pipedrive ‚Üí Settings ‚Üí Apps & integrations
   ‚Üí Find "Pipenotify" in list
   ‚Üí Ensure it's enabled and has proper permissions
   ‚Üí If not listed, re-install the app
   ```

3. **Firewall/Network Issues**
   ```
   ‚Üí Ensure Pipedrive APIs are not blocked
   ‚Üí Allow popups from Pipedrive domain
   ‚Üí Check corporate firewall settings
   ```

#### Data Sync Issues
**Symptoms:**
- Old or missing data in rule filters
- Incorrect pipeline/stage options
- User lists out of date

**Refresh Data:**
1. **Manual Refresh**
   ```
   ‚Üí Disconnect and reconnect Pipedrive
   ‚Üí This refreshes all cached data
   ‚Üí May take 2-3 minutes to complete
   ```

2. **Clear Cached Data**
   ```
   ‚Üí Log out and log back in
   ‚Üí This forces fresh data load
   ‚Üí Verify updated information appears
   ```

### Google Chat Integration Issues

#### Webhook Problems
**Symptoms:**
- Webhooks fail to deliver messages
- Test messages don't appear
- "Webhook unreachable" errors

**Troubleshooting Steps:**
1. **Verify Webhook URL**
   ```
   ‚Üí Copy webhook URL from Google Chat
   ‚Üí Ensure it contains "chat.googleapis.com"
   ‚Üí Check for any extra characters or spaces
   ‚Üí Test URL format in webhook validation
   ```

2. **Google Chat Space Status**
   ```
   ‚Üí Ensure you're still a member of the space
   ‚Üí Check if space was archived or deleted
   ‚Üí Verify webhook is still active in space settings
   ‚Üí Try creating new webhook as test
   ```

3. **Permission Issues**
   ```
   ‚Üí Ensure you have permission to add webhooks
   ‚Üí Check if organization policy blocks webhooks
   ‚Üí Verify Google Workspace settings allow external integrations
   ```

#### Message Formatting Issues
**Symptoms:**
- Messages appear garbled or incorrectly formatted
- Variables not replaced properly
- Links don't work

**Template Debugging:**
1. **Test with Simple Template**
   ```
   ‚Üí Switch to "Simple" template mode
   ‚Üí If this works, issue is with custom template
   ‚Üí Gradually add complexity to identify problem
   ```

2. **Variable Validation**
   ```
   ‚Üí Check variable spelling: {deal.title} not {deal.name}
   ‚Üí Ensure proper bracket syntax: {} not []
   ‚Üí Test with sample data in template editor
   ```

3. **Link Issues**
   ```
   ‚Üí Verify Pipedrive domain in link URLs
   ‚Üí Check if organization blocks external links
   ‚Üí Test links by clicking them in received messages
   ```

---

## Support Resources

### Self-Service Resources

#### Documentation
- üìñ **User Guide**: Complete feature documentation
- üîß **Technical Documentation**: Developer and admin resources
- üÜò **This Troubleshooting Guide**: Common issues and solutions
- üìã **FAQ**: Frequently asked questions

#### Diagnostic Tools
- üß™ **Webhook Test**: Built-in connectivity testing
- üìä **Analytics Dashboard**: Performance monitoring
- üìù **Logs Viewer**: Detailed error information
- ‚ö° **Health Check**: System status overview

### Getting Help

#### Before Contacting Support
1. **Try Quick Diagnostic Checklist** (above)
2. **Search Documentation** for your specific issue
3. **Check Recent Logs** for error details
4. **Test in Incognito Mode** to rule out browser issues

#### Information to Include
**Required Information:**
- Exact error message or problem description
- Steps to reproduce the issue
- When the problem started
- Browser and operating system
- Screenshots of error or unexpected behavior

**Helpful Additional Information:**
- Tenant ID (from URL or account settings)
- Affected rule names or webhook names
- Recent changes to configuration
- Network environment (corporate, home, etc.)

#### Response Time Expectations
- üü¢ **General Questions**: 24-48 hours
- üü° **Technical Issues**: 12-24 hours
- üî¥ **Critical/Production Issues**: 2-4 hours
- üö® **System Outages**: 1 hour

### Status & Updates

#### System Status
- Check service status and planned maintenance
- Subscribe to status updates
- View historical uptime data

#### Known Issues
- Current known issues and workarounds
- Planned fixes and estimated timelines
- Temporary solutions while fixes are developed

---

## Emergency Procedures

### Service Outage
1. **Check Status Page** first
2. **Verify Network Connectivity** to rule out local issues
3. **Try Alternative Browser** to confirm it's not browser-specific
4. **Wait for Resolution** if confirmed outage
5. **Monitor Status Page** for updates

### Data Loss Concerns
1. **Don't Panic** - system has automatic backups
2. **Document What's Missing** with specific details
3. **Avoid Making Changes** that might complicate recovery
4. **Contact Support Immediately** with details
5. **Preserve Evidence** through screenshots

### Security Incident
1. **Change Passwords Immediately** for Pipedrive and Google accounts
2. **Revoke API Access** in Pipedrive app settings
3. **Review Recent Activity** in logs for suspicious patterns
4. **Contact Support** to report potential security issue
5. **Monitor for Unauthorized Activity**

---

*This troubleshooting guide covers the most common issues and their solutions. For additional help or complex issues not covered here, please contact our support team with detailed information about your problem.*

*Last updated: December 2024*